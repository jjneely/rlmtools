Configuration of Apache and RLMTools
====================================

Right now the XMLRPC client calls URL/handler.py and the URL maps to the
directory that this tarball/project is in.  The handler.py file is actually
not in this directory but the rlmtools/ directory.  That's what we want
for now.  I've included an .htaccess file that looks like this:

AddHandler python-program .py
PythonHandler rlmtools.handler
PythonDebug On
PythonInterpPerDirectory On

<Files solaris2ks.conf>
    deny from all
</Files>

That will start the handler.py script via mod_python when and URL is used that
looks like URL/*.py.  

The code looks in ./solaris2ks.conf or /etc/solaris2ks.conf to find the
following 4 options in a [db] section: host, user, passwd, db.  Also, [main]
must include 'logfile' and 'log_level'.

The rest of the configuration RLMTools uses is stored inside the database.  Use
the CLI in configDragon.py to insert configuration and check the configuration
for completeness.

The Web-Kickstart code is used to pull client configuration information
from the client's Web-Kickstart config file.  Web-Kickstart needs its
full configuration in /etc/solaris2ks.conf.  Yes, there is some duplication
here but adding additional functionality to RLMTools should not require
upgrades to Web-Kickstart.

CherryPy Setup
==============

The CherryPy framework runs the web application that users can see.  It can
run with the CherryPy standalone web server or through Apache with 
mod_python using the WSGI gateway that I've included.  It also makes use
of NCSU's WRAP authentication which is only available via Apache and the
WRAP module.  The following configuration will get the web interface
going on /rlmtools.  Note that the app expects to be mounted in that location
so if that changes you'll need to edit the source.

The PythonPath option basically lets python know in what directory the
rlmtools module/package is if its not installed in your Python path.

<Location /rlmtools>
    PythonPath "sys.path + ['/root/ncsu-rlmtools']"
                            
    SetHandler python-program
    PythonHandler modpython_gateway::handler
    PythonOption wsgi.application cherrypy._cpwsgi::wsgiApp
    PythonOption wsgi.startup rlmtools.webapp::wsgi
    PythonOption SCRIPT_NAME /rlmtools

    AuthType WRAP
    require affiliation ncsu.edu
    require known-user
</Location>

Jack Neely
December 4th, 2006

