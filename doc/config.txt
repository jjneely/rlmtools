Configuration of Apache and RLMTools
====================================

Right now the XMLRPC client calls URL/handler.py and the URL maps to the
directory that this tarball/project is in.  The handler.py file is actually
not in this directory but the rlmtools/ directory.  That's what we want
for now.  I've included an .htaccess file that looks like this:

AddHandler python-program .py
PythonHandler rlmtools.handler
PythonDebug On
PythonInterpPerDirectory On

<Files solaris2ks.conf>
    deny from all
</Files>

That will start the handler.py script via mod_python when and URL is used that
looks like URL/*.py.  

This code base imports the Web-Kickstart code and uses that and
Web-Kickstart's configuration to find its database and pull client
configuration from the Web-Kickstart config files.  Therefore, Web-Kickstart
needs to know where its config file solaris2ks.conf lives.  This can either be
in the current directory (the top level in this project) or in 
/etc/solaris2ks.conf.  Things get confusing with what the current directory
is where some code wants the configuration data.  Using /etc/solaris2ks.conf
is recommended.

CherryPy Setup
==============

The CherryPy framework runs the web application that users can see.  It can
run with the CherryPy standalone web server or through Apache with 
mod_python using the WSGI gateway that I've included.  It also makes use
of NCSU's WRAP authentication which is only available via Apache and the
WRAP module.  The following configuration will get the web interface
going on /rlmtools.  Note that the app expects to be mounted in that location
so if that changes you'll need to edit the source.

The PythonPath option basically lets python know in what directory the
rlmtools module/package is if its not installed in your Python path.

<Location /rlmtools>
    PythonPath "sys.path + ['/root/ncsu-rlmtools']"
                            
    SetHandler python-program
    PythonHandler modpython_gateway::handler
    PythonOption wsgi.application cherrypy._cpwsgi::wsgiApp
    PythonOption wsgi.startup rlmtools.webapp::wsgi
    PythonOption SCRIPT_NAME /rlmtools

    AuthType WRAP
    require affiliation ncsu.edu
    require known-user
</Location>

Jack Neely
December 4th, 2006

